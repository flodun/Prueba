<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPMN - User Journey PP-009: Herramientas Digitales para Consultoras</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .diagram-section {
            margin-bottom: 60px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }

        .diagram-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .diagram-section h3 {
            color: #34495e;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .diagram-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
            overflow-x: auto;
        }

        .mermaid {
            display: flex;
            justify-content: center;
            min-height: 400px;
        }

        .description {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }

        .description h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .description ul {
            margin-left: 20px;
            color: #555;
            line-height: 1.8;
        }

        .description li {
            margin-bottom: 8px;
        }

        .legend {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #ffc107;
        }

        .legend h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .legend-box {
            width: 30px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid #333;
        }

        .start { background: #28a745; }
        .task { background: #3498db; }
        .gateway { background: #ffc107; }
        .end { background: #dc3545; }

        .note {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-style: italic;
            color: #666;
            border-left: 3px solid #95a5a6;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .diagram-section {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>游꿢 BPMN - User Journey</h1>
        <p class="subtitle">PP-009: Plataforma Digital para Consultoras de Venta Directa</p>

        <div class="legend">
            <h3>游늶 Leyenda de Elementos BPMN</h3>
            <div class="legend-item">
                <div class="legend-box start"></div>
                <span><strong>Evento de Inicio:</strong> Punto de inicio del proceso</span>
            </div>
            <div class="legend-item">
                <div class="legend-box task"></div>
                <span><strong>Tarea:</strong> Actividad realizada por el usuario o sistema</span>
            </div>
            <div class="legend-item">
                <div class="legend-box gateway"></div>
                <span><strong>Compuerta (Gateway):</strong> Punto de decisi칩n o bifurcaci칩n</span>
            </div>
            <div class="legend-item">
                <div class="legend-box end"></div>
                <span><strong>Evento de Fin:</strong> Punto de finalizaci칩n del proceso</span>
            </div>
        </div>

        <!-- Journey Principal Completo -->
        <div class="diagram-section">
            <h2>游댃 Journey Principal Completo</h2>
            <p style="color: #666; margin-bottom: 20px;">Flujo completo desde el inicio de sesi칩n hasta las acciones principales de la consultora</p>
            
            <div class="diagram-container">
                <div class="mermaid">
flowchart TD
    Start([Inicio: Consultora abre la app]) --> Login{쯏a est치<br/>autenticada?}
    
    Login -->|No| Auth[Ingresar credenciales<br/>Email/Tel칠fono + Contrase침a]
    Auth --> Validate{Validar<br/>credenciales}
    Validate -->|V치lidas| LoadData[Cargar datos de consultora<br/>y sincronizar cat치logo]
    Validate -->|Inv치lidas| Error[Mostrar error<br/>y permitir reintento]
    Error --> Auth
    
    Login -->|S칤| LoadData
    LoadData --> CheckConnection{쮿ay<br/>conexi칩n?}
    
    CheckConnection -->|S칤| SyncOnline[Sincronizar datos<br/>con servidor]
    CheckConnection -->|No| UseCache[Usar datos en cach칠<br/>Modo Offline]
    
    SyncOnline --> Dashboard[Dashboard Principal<br/>Ver resumen de ventas]
    UseCache --> Dashboard
    
    Dashboard --> UserAction{쯈u칠 acci칩n<br/>desea realizar?}
    
    UserAction -->|Crear Pedido| FlowPedido[Flujo: Crear Pedido]
    UserAction -->|Gestionar Clientes| FlowClientes[Flujo: Gestionar Clientes]
    UserAction -->|Ver Cat치logo| FlowCatalogo[Flujo: Ver Cat치logo]
    UserAction -->|Ver Pedidos| FlowPedidos[Flujo: Ver Pedidos]
    UserAction -->|Ver Perfil| FlowPerfil[Flujo: Ver Perfil]
    
    FlowPedido --> Dashboard
    FlowClientes --> Dashboard
    FlowCatalogo --> Dashboard
    FlowPedidos --> Dashboard
    FlowPerfil --> Dashboard
    
    Dashboard --> Logout{쮺errar<br/>sesi칩n?}
    Logout -->|S칤| End([Fin: Cerrar sesi칩n])
    Logout -->|No| UserAction
    
    style Start fill:#28a745,stroke:#1e7e34,stroke-width:3px,color:#fff
    style End fill:#dc3545,stroke:#c82333,stroke-width:3px,color:#fff
    style Login fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style Validate fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style CheckConnection fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style UserAction fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style Logout fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style Dashboard fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                </div>
            </div>

            <div class="description">
                <h4>Descripci칩n del Journey Principal</h4>
                <ul>
                    <li><strong>Autenticaci칩n:</strong> La consultora inicia sesi칩n o la app verifica sesi칩n activa</li>
                    <li><strong>Sincronizaci칩n:</strong> Se cargan datos actualizados o se usa cach칠 si no hay conexi칩n</li>
                    <li><strong>Dashboard:</strong> Punto central de navegaci칩n con resumen de negocio</li>
                    <li><strong>Acciones:</strong> La consultora puede realizar m칰ltiples acciones desde el dashboard</li>
                    <li><strong>Navegaci칩n:</strong> Despu칠s de cada acci칩n, regresa al dashboard para continuar trabajando</li>
                </ul>
            </div>
        </div>

        <!-- Flujo Detallado: Crear Pedido -->
        <div class="diagram-section">
            <h2>游 Flujo Detallado: Crear Pedido</h2>
            <p style="color: #666; margin-bottom: 20px;">Proceso completo para crear un nuevo pedido (Flujo cr칤tico - US-003)</p>
            
            <div class="diagram-container">
                <div class="mermaid">
flowchart TD
    Start([Inicio: Consultora quiere<br/>crear un pedido]) --> SelectMethod{쮻esde d칩nde<br/>iniciar?}
    
    SelectMethod -->|Dashboard| ClickNew[Click en 'Nuevo Pedido']
    SelectMethod -->|Cat치logo| GoCatalog[Ir a Cat치logo]
    
    ClickNew --> InitCart[Inicializar carrito<br/>de compras]
    GoCatalog --> BrowseProducts[Ver lista de productos<br/>o buscar]
    
    BrowseProducts --> Search{쮹uscar<br/>producto?}
    Search -->|S칤| EnterSearch[Escribir nombre/c칩digo<br/>de producto]
    EnterSearch --> ShowResults[Mostrar resultados<br/>en tiempo real]
    ShowResults --> SelectProduct[Seleccionar producto]
    Search -->|No| SelectProduct
    
    SelectProduct --> ViewDetails[Ver detalles del producto<br/>Precio, descripci칩n, disponibilidad]
    ViewDetails --> AddToCart{쮸gregar<br/>al carrito?}
    
    AddToCart -->|S칤| AddProduct[Agregar producto<br/>al carrito]
    AddToCart -->|No| BrowseProducts
    
    AddProduct --> UpdateTotal[Actualizar total<br/>del pedido en tiempo real]
    UpdateTotal --> MoreProducts{쮸gregar m치s<br/>productos?}
    
    MoreProducts -->|S칤| BrowseProducts
    MoreProducts -->|No| SelectClient[Seleccionar cliente<br/>para el pedido]
    
    InitCart --> SelectClient
    
    SelectClient --> ClientExists{쮺liente<br/>existe?}
    
    ClientExists -->|S칤| SearchClient[Buscar cliente<br/>por nombre/tel칠fono]
    SearchClient --> SelectFromList[Seleccionar de lista]
    SelectFromList --> ReviewOrder[Revisar pedido<br/>Productos, total, cliente]
    
    ClientExists -->|No| CreateClient[Crear nuevo cliente<br/>Nombre, tel칠fono, email]
    CreateClient --> ValidateClient{Validar datos<br/>del cliente}
    ValidateClient -->|V치lido| SaveClient[Guardar cliente<br/>y seleccionar]
    ValidateClient -->|Inv치lido| ShowError[Mostrar error<br/>y corregir]
    ShowError --> CreateClient
    SaveClient --> ReviewOrder
    
    ReviewOrder --> ApplyPromos[Aplicar promociones<br/>vigentes autom치ticamente]
    ApplyPromos --> ShowFinalTotal[Mostrar total final<br/>con descuentos aplicados]
    ShowFinalTotal --> ConfirmOrder{쮺onfirmar<br/>y enviar pedido?}
    
    ConfirmOrder -->|No| ReviewOrder
    ConfirmOrder -->|S칤| ValidateOrder{Validar pedido<br/>Disponibilidad, datos cliente}
    
    ValidateOrder -->|V치lido| CheckConnection2{쮿ay<br/>conexi칩n?}
    ValidateOrder -->|Inv치lido| ShowValidationError[Mostrar errores<br/>de validaci칩n]
    ShowValidationError --> ReviewOrder
    
    CheckConnection2 -->|S칤| SendOrder[Enviar pedido<br/>a sistema central]
    CheckConnection2 -->|No| SaveOffline[Guardar pedido<br/>localmente para sincronizar]
    
    SendOrder --> WaitResponse[Esperar respuesta<br/>del servidor]
    WaitResponse --> ResponseReceived{쯇edido<br/>enviado?}
    
    ResponseReceived -->|S칤| GenerateReceipt[Generar recibo digital<br/>con n칰mero de pedido]
    ResponseReceived -->|No| ShowError2[Mostrar error<br/>y permitir reintento]
    ShowError2 --> SendOrder
    
    GenerateReceipt --> ShowConfirmation[Mostrar confirmaci칩n<br/>Pedido #XXX creado exitosamente]
    SaveOffline --> ShowOfflineMsg[Mostrar mensaje:<br/>Pedido guardado, se enviar치<br/>al recuperar conexi칩n]
    
    ShowConfirmation --> SyncBackground[Sincronizar en background<br/>Actualizar dashboard]
    ShowOfflineMsg --> SyncBackground
    
    SyncBackground --> ClearCart[Limpiar carrito]
    ClearCart --> End([Fin: Pedido creado<br/>Regresar a Dashboard])
    
    style Start fill:#28a745,stroke:#1e7e34,stroke-width:3px,color:#fff
    style End fill:#dc3545,stroke:#c82333,stroke-width:3px,color:#fff
    style SelectMethod fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style Search fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style AddToCart fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style MoreProducts fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ClientExists fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ValidateClient fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ConfirmOrder fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ValidateOrder fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style CheckConnection2 fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ResponseReceived fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ReviewOrder fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
    style SendOrder fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                </div>
            </div>

            <div class="description">
                <h4>Caracter칤sticas Clave del Flujo</h4>
                <ul>
                    <li><strong>Tiempo objetivo:</strong> &lt; 2 minutos para pedido simple</li>
                    <li><strong>Modo offline:</strong> Permite crear pedidos sin conexi칩n, se sincronizan autom치ticamente</li>
                    <li><strong>Validaciones:</strong> Verifica disponibilidad de productos y datos del cliente antes de enviar</li>
                    <li><strong>Promociones autom치ticas:</strong> El sistema aplica descuentos vigentes sin intervenci칩n manual</li>
                    <li><strong>Feedback inmediato:</strong> Total del pedido se actualiza en tiempo real al agregar productos</li>
                </ul>
            </div>
        </div>

        <!-- Flujo: Gestionar Clientes -->
        <div class="diagram-section">
            <h2>游논 Flujo: Gestionar Clientes</h2>
            <p style="color: #666; margin-bottom: 20px;">Proceso para crear, buscar y gestionar clientes (US-001)</p>
            
            <div class="diagram-container">
                <div class="mermaid">
flowchart TD
    Start([Inicio: Consultora va a<br/>secci칩n Clientes]) --> LoadClients[Cargar lista de clientes<br/>desde cach칠 local]
    
    LoadClients --> ShowList[Mostrar lista de clientes<br/>con b칰squeda r치pida]
    ShowList --> UserAction{쯈u칠 acci칩n<br/>desea realizar?}
    
    UserAction -->|Buscar Cliente| EnterSearch[Escribir en barra<br/>de b칰squeda]
    UserAction -->|Crear Cliente| ClickNew[Click en 'Nuevo Cliente']
    UserAction -->|Ver Cliente| SelectClient[Seleccionar cliente<br/>de la lista]
    
    EnterSearch --> RealTimeSearch[B칰squeda en tiempo real<br/>Filtrar por nombre/tel칠fono]
    RealTimeSearch --> ShowResults[Mostrar resultados<br/>mientras escribe]
    ShowResults --> SelectFromResults[Seleccionar cliente<br/>de resultados]
    SelectFromResults --> ViewClientDetails
    
    SelectClient --> ViewClientDetails[Ver detalles del cliente<br/>Informaci칩n, historial, notas]
    
    ViewClientDetails --> ClientActions{쯈u칠 hacer<br/>con el cliente?}
    
    ClientActions -->|Editar| EditClient[Editar informaci칩n<br/>del cliente]
    ClientActions -->|Agregar Nota| AddNote[Agregar nota o<br/>recordatorio]
    ClientActions -->|Ver Historial| ViewHistory[Ver historial<br/>de pedidos]
    ClientActions -->|Usar en Pedido| UseInOrder[Usar cliente<br/>para nuevo pedido]
    ClientActions -->|Volver| ShowList
    
    EditClient --> ValidateEdit{Validar datos<br/>editados}
    ValidateEdit -->|V치lido| SaveEdit[Guardar cambios<br/>y sincronizar]
    ValidateEdit -->|Inv치lido| ShowError[Mostrar error<br/>y permitir correcci칩n]
    ShowError --> EditClient
    SaveEdit --> ViewClientDetails
    
    AddNote --> SaveNote[Guardar nota<br/>con fecha opcional]
    SaveNote --> ViewClientDetails
    
    ViewHistory --> ShowOrders[Mostrar lista de pedidos<br/>del cliente ordenados por fecha]
    ShowOrders --> OrderDetail{쯌er detalle<br/>de pedido?}
    OrderDetail -->|S칤| ViewOrderDetail[Ver detalle completo<br/>del pedido seleccionado]
    OrderDetail -->|No| ViewClientDetails
    ViewOrderDetail --> ShowOrders
    
    UseInOrder --> GoToOrder[Ir a flujo<br/>Crear Pedido]
    
    ClickNew --> ShowForm[Mostrar formulario<br/>de nuevo cliente]
    ShowForm --> FillData[Llenar datos:<br/>Nombre, Tel칠fono, Email opcional]
    FillData --> ValidateNew{Validar datos<br/>del nuevo cliente}
    
    ValidateNew -->|Tel칠fono duplicado| ShowDuplicateError[Mostrar error:<br/>Cliente ya existe]
    ShowDuplicateError --> FillData
    ValidateNew -->|Datos inv치lidos| ShowValidationError[Mostrar errores<br/>de validaci칩n]
    ShowValidationError --> FillData
    ValidateNew -->|V치lido| SaveNew[Guardar nuevo cliente<br/>localmente]
    
    SaveNew --> SyncClient[Sincronizar con servidor<br/>en background]
    SyncClient --> ShowSuccess[Mostrar mensaje:<br/>Cliente creado exitosamente]
    ShowSuccess --> ViewClientDetails
    
    style Start fill:#28a745,stroke:#1e7e34,stroke-width:3px,color:#fff
    style UserAction fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ClientActions fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ValidateEdit fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ValidateNew fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style OrderDetail fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ViewClientDetails fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
    style SaveNew fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                </div>
            </div>

            <div class="description">
                <h4>Caracter칤sticas del Flujo</h4>
                <ul>
                    <li><strong>Tiempo objetivo de b칰squeda:</strong> &lt; 10 segundos</li>
                    <li><strong>B칰squeda en tiempo real:</strong> Resultados aparecen mientras el usuario escribe</li>
                    <li><strong>Validaci칩n de duplicados:</strong> Previene crear clientes con tel칠fono duplicado</li>
                    <li><strong>Historial completo:</strong> Acceso r치pido al historial de pedidos de cada cliente</li>
                    <li><strong>Notas y recordatorios:</strong> Permite agregar informaci칩n adicional por cliente</li>
                </ul>
            </div>
        </div>

        <!-- Flujo: Ver Cat치logo -->
        <div class="diagram-section">
            <h2>游닍 Flujo: Ver Cat치logo y Productos</h2>
            <p style="color: #666; margin-bottom: 20px;">Proceso para explorar y buscar productos (US-002)</p>
            
            <div class="diagram-container">
                <div class="mermaid">
flowchart TD
    Start([Inicio: Consultora va a<br/>secci칩n Cat치logo]) --> CheckSync{쮺at치logo<br/>sincronizado?}
    
    CheckSync -->|No| SyncCatalog[Sincronizar cat치logo<br/>con servidor]
    CheckSync -->|S칤| LoadCatalog[Cargar cat치logo<br/>desde cach칠 local]
    
    SyncCatalog --> LoadCatalog
    LoadCatalog --> ShowCatalog[Mostrar lista de productos<br/>con im치genes y precios]
    
    ShowCatalog --> UserAction{쯈u칠 acci칩n<br/>desea realizar?}
    
    UserAction -->|Buscar Producto| EnterSearch[Escribir nombre/c칩digo<br/>de producto]
    UserAction -->|Filtrar| ApplyFilters[Aplicar filtros:<br/>Categor칤a, precio, disponibilidad]
    UserAction -->|Ver Producto| SelectProduct[Seleccionar producto<br/>de la lista]
    UserAction -->|Scroll| LoadMore[Cargar m치s productos<br/>Paginaci칩n]
    
    EnterSearch --> RealTimeSearch[B칰squeda en tiempo real<br/>Resultados mientras escribe]
    RealTimeSearch --> ShowSearchResults[Mostrar resultados<br/>de b칰squeda]
    ShowSearchResults --> SelectProduct
    
    ApplyFilters --> FilterResults[Mostrar productos<br/>filtrados]
    FilterResults --> SelectProduct
    
    LoadMore --> ShowCatalog
    
    SelectProduct --> ViewDetails[Ver detalles del producto<br/>Imagen, precio, descripci칩n,<br/>ingredientes, modo de uso]
    
    ViewDetails --> ProductAction{쯈u칠 hacer<br/>con el producto?}
    
    ProductAction -->|Agregar a Carrito| AddToCart[Agregar al carrito<br/>Seleccionar cantidad]
    ProductAction -->|Ver Similar| ShowSimilar[Mostrar productos<br/>similares]
    ProductAction -->|Compartir| ShareProduct[Compartir producto<br/>Fase 2]
    ProductAction -->|Volver| ShowCatalog
    
    AddToCart --> ConfirmAdd{쮺onfirmar<br/>cantidad?}
    ConfirmAdd -->|S칤| UpdateCart[Actualizar carrito<br/>y mostrar confirmaci칩n]
    ConfirmAdd -->|No| ViewDetails
    
    UpdateCart --> ContinueShopping{쮺ontinuar<br/>comprando?}
    ContinueShopping -->|S칤| ShowCatalog
    ContinueShopping -->|No| GoToCart[Ir a carrito<br/>para crear pedido]
    
    ShowSimilar --> SelectProduct
    ShareProduct --> ViewDetails
    
    GoToCart --> FlowPedido[Ir a flujo<br/>Crear Pedido]
    
    style Start fill:#28a745,stroke:#1e7e34,stroke-width:3px,color:#fff
    style CheckSync fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style UserAction fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ProductAction fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ConfirmAdd fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ContinueShopping fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ViewDetails fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
    style AddToCart fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                </div>
            </div>

            <div class="description">
                <h4>Caracter칤sticas del Flujo</h4>
                <ul>
                    <li><strong>Tiempo de carga objetivo:</strong> &lt; 3 segundos para carga inicial</li>
                    <li><strong>B칰squeda inteligente:</strong> Resultados relevantes mientras el usuario escribe</li>
                    <li><strong>Filtros avanzados:</strong> Por categor칤a, precio, disponibilidad de stock</li>
                    <li><strong>Informaci칩n completa:</strong> Detalles del producto incluyen ingredientes y modo de uso</li>
                    <li><strong>Integraci칩n con pedidos:</strong> Agregar productos directamente al carrito desde el cat치logo</li>
                </ul>
            </div>
        </div>

        <!-- Flujo: Dashboard y Sincronizaci칩n -->
        <div class="diagram-section">
            <h2>游늵 Flujo: Dashboard y Sincronizaci칩n</h2>
            <p style="color: #666; margin-bottom: 20px;">Proceso de visualizaci칩n de m칠tricas y sincronizaci칩n de datos (US-004, US-005)</p>
            
            <div class="diagram-container">
                <div class="mermaid">
flowchart TD
    Start([Inicio: Consultora abre app<br/>o regresa al Dashboard]) --> CheckAuth{쯋suario<br/>autenticado?}
    
    CheckAuth -->|No| RedirectLogin[Redirigir a<br/>pantalla de login]
    CheckAuth -->|S칤| CheckConnection{쮿ay<br/>conexi칩n?}
    
    CheckConnection -->|S칤| SyncData[Sincronizar datos:<br/>Cat치logo, clientes, pedidos]
    CheckConnection -->|No| UseCache[Usar datos en cach칠<br/>Mostrar indicador offline]
    
    SyncData --> LoadMetrics[Cargar m칠tricas:<br/>Ventas, clientes, pedidos]
    UseCache --> LoadMetrics
    
    LoadMetrics --> ShowDashboard[Mostrar Dashboard:<br/>Resumen de ventas mes actual<br/>Comparaci칩n con mes anterior<br/>Clientes activos<br/>Pedidos pendientes<br/>Comisiones acumuladas]
    
    ShowDashboard --> UserInteraction{쯈u칠 acci칩n<br/>desea realizar?}
    
    UserInteraction -->|Ver Detalle Ventas| ExpandSales[Expandir gr치fico<br/>de ventas]
    UserInteraction -->|Ver Pedidos| GoToOrders[Ir a lista<br/>de pedidos]
    UserInteraction -->|Nueva Acci칩n| QuickAction[Acceso r치pido:<br/>Nuevo Pedido, Nuevo Cliente]
    UserInteraction -->|Refrescar| RefreshData[Refrescar datos<br/>y sincronizar]
    UserInteraction -->|Navegar| Navigate[Ir a otra secci칩n:<br/>Cat치logo, Clientes, etc.]
    
    ExpandSales --> ShowDetailChart[Mostrar gr치fico detallado<br/>Ventas por d칤a/semana]
    ShowDetailChart --> ShowDashboard
    
    GoToOrders --> FlowPedidos[Flujo: Ver Pedidos]
    FlowPedidos --> ShowDashboard
    
    QuickAction --> ExecuteAction[Ejecutar acci칩n<br/>correspondiente]
    ExecuteAction --> ShowDashboard
    
    RefreshData --> CheckConnection2{쮿ay<br/>conexi칩n?}
    CheckConnection2 -->|S칤| SyncData2[Sincronizar datos<br/>actualizados]
    CheckConnection2 -->|No| ShowOfflineMsg[Mostrar mensaje:<br/>Sin conexi칩n, usando datos<br/>en cach칠]
    ShowOfflineMsg --> ShowDashboard
    
    SyncData2 --> UpdateMetrics[Actualizar m칠tricas<br/>en tiempo real]
    UpdateMetrics --> ShowDashboard
    
    Navigate --> OtherSection[Ir a secci칩n<br/>seleccionada]
    OtherSection --> ShowDashboard
    
    ShowDashboard --> BackgroundSync{쯉incronizaci칩n<br/>en background?}
    BackgroundSync -->|Cada 15 min| AutoSync[Sincronizar autom치ticamente<br/>sin interrumpir usuario]
    BackgroundSync -->|Manual| ShowDashboard
    
    AutoSync --> ShowDashboard
    
    style Start fill:#28a745,stroke:#1e7e34,stroke-width:3px,color:#fff
    style CheckAuth fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style CheckConnection fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style CheckConnection2 fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style UserInteraction fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style BackgroundSync fill:#ffc107,stroke:#e0a800,stroke-width:2px
    style ShowDashboard fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
    style SyncData fill:#17a2b8,stroke:#138496,stroke-width:2px,color:#fff
                </div>
            </div>

            <div class="description">
                <h4>Caracter칤sticas del Dashboard</h4>
                <ul>
                    <li><strong>M칠tricas clave:</strong> Ventas del mes, comparaci칩n mensual, clientes activos, pedidos pendientes</li>
                    <li><strong>Sincronizaci칩n autom치tica:</strong> Cada 15 minutos en background sin interrumpir al usuario</li>
                    <li><strong>Modo offline:</strong> Funciona con datos en cach칠 cuando no hay conexi칩n</li>
                    <li><strong>Actualizaci칩n en tiempo real:</strong> M칠tricas se actualizan autom치ticamente al sincronizar</li>
                    <li><strong>Accesos r치pidos:</strong> Botones para acciones m치s comunes (nuevo pedido, nuevo cliente)</li>
                </ul>
            </div>
        </div>

        <div class="note">
            <strong>Nota:</strong> Estos diagramas BPMN representan los flujos principales del journey del usuario basados en el PRD PP-009. 
            Los tiempos objetivos y funcionalidades est치n alineados con los requisitos funcionales y user stories documentados.
            Los flujos de Fase 2 (omnicanal, pagos, notificaciones) se pueden agregar como extensiones de estos diagramas base.
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis',
                padding: 20
            },
            themeVariables: {
                primaryColor: '#3498db',
                primaryTextColor: '#fff',
                primaryBorderColor: '#2980b9',
                lineColor: '#34495e',
                secondaryColor: '#ecf0f1',
                tertiaryColor: '#bdc3c7'
            }
        });
    </script>
</body>
</html>

